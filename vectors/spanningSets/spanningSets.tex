\documentclass{ximera}

\input{../../preamble.tex}

\title{Spanning Sets}

\begin{document}
\begin{abstract}
  ``Spanning sets'' provide a quick way to describe an infinite set of
  vectors, making use of linear combinations.
\end{abstract}
\maketitle

In this section we will provide a quick way to describe an infinite
set of vectors, making use of linear combinations.  This will give us
a convenient way to describe the solution set of a linear system, the
null space of a matrix, and many other sets of vectors.

In \ref{example:VFSAL} we saw the solution set of a homogeneous system
described as all possible linear combinations of two particular
vectors.  This is a useful way to construct or describe infinite sets
of vectors, so we encapsulate the idea in a definition.

\begin{definition}[Span of a Set of Column Vectors]
  Given a set of vectors $S=\{\vectorlist{u}{p}\}$, their \dfn{span},
  $\spn{S}$, is the set of all possible linear combinations of
  $\vectorlist{u}{p}$.  Symbolically,
  \begin{align*}
    \spn{S}&=\setparts{\lincombo{\alpha}{u}{p}}{\alpha_i\in\complexes,\,1\leq i\leq p}\\
           &=\setparts{\sum_{i=1}^{p}\alpha_i\vect{u}_i}{\alpha_i\in\complexes,\,1\leq i\leq p}
  \end{align*}
\end{definition}

The span is just a set of vectors, though in all but one situation it
is an infinite set.  (Just when is it not infinite?)  So we start with
a finite collection of vectors $S$ ($p$ of them to be precise), and
use this finite set to describe an infinite set of vectors, $\spn{S}$.
Confusing the \textit{finite} set $S$ with the \textit{infinite} set
$\spn{S}$ is one of the most persistent problems in understanding
introductory linear algebra.  We will see this construction
repeatedly, so let us work through some examples to get comfortable
with it.  The most obvious question about a set is if a particular
item of the correct type is in the set, or not in the set.

\begin{example}[A basic span]
  Consider the set of 5 vectors, $S$, from $\complex{4}$
  \[
    S=\set{
      \colvector{1 \\ 1 \\ 3 \\ 1},\,
      \colvector{2 \\ 1 \\ 2 \\ -1},\,
      \colvector{7 \\ 3 \\ 5 \\ -5},\,
      \colvector{1 \\ 1 \\ -1 \\ 2},\,
      \colvector{-1 \\ 0 \\ 9 \\ 0}
    }
  \]
  and consider the infinite set of vectors $\spn{S}$ formed from all
  possible linear combinations of the elements of $S$.  Here are four
  vectors we definitely know are elements of $\spn{S}$, since we will
  construct them in accordance with \ref{definition:SSCV},
  \[
    \vect{w}=
    (2)\colvector{1 \\ 1 \\ 3 \\ 1}+
    (1)\colvector{2 \\ 1 \\ 2 \\ -1}+
    (-1)\colvector{7 \\ 3 \\ 5 \\ -5}+
    (2)\colvector{1 \\ 1 \\ -1 \\ 2}+
    (3)\colvector{-1 \\ 0 \\ 9 \\ 0}
    =
    \colvector{-4\\2\\28\\10}
  \]
  \[
    \vect{x}=
    (5)\colvector{1 \\ 1 \\ 3 \\ 1}+
    (-6)\colvector{2 \\ 1 \\ 2 \\ -1}+
    (-3)\colvector{7 \\ 3 \\ 5 \\ -5}+
    (4)\colvector{1 \\ 1 \\ -1 \\ 2}+
    (2)\colvector{-1 \\ 0 \\ 9 \\ 0}
    =
    \colvector{-26\\-6\\2\\34}
  \]
  \[
    \vect{y}=
    (1)\colvector{1 \\ 1 \\ 3 \\ 1}+
    (0)\colvector{2 \\ 1 \\ 2 \\ -1}+
    (1)\colvector{7 \\ 3 \\ 5 \\ -5}+
    (0)\colvector{1 \\ 1 \\ -1 \\ 2}+
    (1)\colvector{-1 \\ 0 \\ 9 \\ 0}
    =
    \colvector{\answer{7}\\4\\17\\-4}
  \]
  \[
    \vect{z}=
    (0)\colvector{1 \\ 1 \\ 3 \\ 1}+
    (0)\colvector{2 \\ 1 \\ 2 \\ -1}+
    (0)\colvector{7 \\ 3 \\ 5 \\ -5}+
    (0)\colvector{1 \\ 1 \\ -1 \\ 2}+
    (0)\colvector{-1 \\ 0 \\ 9 \\ 0}
    =
    \colvector{\answer{0}\\0\\0\\0}
  \]
  The purpose of a set is to collect objects with some common
  property, and to exclude objects without that property.  So the most
  fundamental question about a set is if a given object is an element
  of the set or not.  Let us learn more about $\spn{S}$ by
  investigating which vectors are elements of the set, and which are
  not.

  \begin{question}
    First, is $\vect{u}=\colvector{-15\\-6\\19\\5}$ an element of
    $\spn{S}$?
    
    \begin{multipleChoice}
      \choice[correct]{Yes.}
      \choice{No.}
    \end{multipleChoice}
    
    \begin{feedback}[correct]
      We are asking if there are scalars
      $\alpha_1,\,\alpha_2,\,\alpha_3,\,\alpha_4,\,\alpha_5$ such that
      \[
        \alpha_1\colvector{1 \\ 1 \\ 3 \\ 1}+
        \alpha_2\colvector{2 \\ 1 \\ 2 \\ -1}+
        \alpha_3\colvector{7 \\ 3 \\ 5 \\ -5}+
        \alpha_4\colvector{1 \\ 1 \\ -1 \\ 2}+
        \alpha_5\colvector{-1 \\ 0 \\ 9 \\ 0}
        =\vect{u}
        =\colvector{-15\\-6\\19\\5}
      \]
      
      Applying \ref{theorem:SLSLC} we recognize the search for these scalars
      as a solution to a linear system of equations with augmented matrix
      \[
        \begin{bmatrix}
          1 & 2 & 7 & 1 & -1 & -15 \\
          1 & 1 & 3 & 1 & 0 & -6 \\
          3 & 2 & 5 & -1 & 9 & 19 \\
          1 & -1 & -5 & 2 & 0 & 5
        \end{bmatrix}
      \]
      which row-reduces to
      \[
        \begin{bmatrix}
          \leading{1} & 0 & -1 & 0 & 3 & 10 \\
          0 & \leading{1} & 4 & 0 & -1 & -9 \\
          0 & 0 & 0 & \leading{1} & -2 & -7 \\
          0 & 0 & 0 & 0 & 0 & 0
        \end{bmatrix}
      \]
      
      At this point, we see that the system is consistent
      (\ref{theorem:RCLS}), so we know there \textit{is} a solution for
      the five scalars
      $\alpha_1,\,\alpha_2,\,\alpha_3,\,\alpha_4,\,\alpha_5$.  This is
      enough evidence for us to say that $\vect{u}\in\spn{S}$.  If we
      wished further evidence, we could compute an actual solution, say
      \begin{align*}
        \alpha_1&=2
        &
          \alpha_2&=1
        &
          \alpha_3&=-2
        &
          \alpha_4&=-3
        &
          \alpha_5&=2
      \end{align*}
      
      This particular solution allows us to write
      \[
        (2)\colvector{1 \\ 1 \\ 3 \\ 1}+
        (1)\colvector{2 \\ 1 \\ 2 \\ -1}+
        (-2)\colvector{7 \\ 3 \\ 5 \\ -5}+
        (-3)\colvector{1 \\ 1 \\ -1 \\ 2}+
        (2)\colvector{-1 \\ 0 \\ 9 \\ 0}
        =\vect{u}
        =\colvector{-15\\-6\\19\\5}
      \]
      making it even more obvious that $\vect{u}\in\spn{S}$.
    \end{feedback}
  \end{question}
  
  \begin{question}
    Is $\vect{v}=\colvector{3\\1\\2\\-1}$ an element of $\spn{S}$?

    \begin{hint}
      We are asking if there are scalars $\alpha_1,\,\alpha_2,\,\alpha_3,\,\alpha_4,\,\alpha_5$ such that
      \[
        \alpha_1\colvector{1 \\ 1 \\ 3 \\ 1}+
        \alpha_2\colvector{2 \\ 1 \\ 2 \\ -1}+
        \alpha_3\colvector{7 \\ 3 \\ 5 \\ -5}+
        \alpha_4\colvector{1 \\ 1 \\ -1 \\ 2}+
        \alpha_5\colvector{-1 \\ 0 \\ 9 \\ 0}
        =\vect{v}
        =\colvector{3\\1\\2\\-1}
      \]
    \end{hint}
    
    \begin{multipleChoice}
      \choice{Yes.}
      \choice[correct]{No.}
    \end{multipleChoice}

    \begin{feedback}[correct]
      Applying \ref{theorem:SLSLC} we recognize the search for these scalars as a solution to a linear system of equations with augmented matrix
      \[
        \begin{bmatrix}
          1 & 2 & 7 & 1 & -1 & 3 \\
          1 & 1 & 3 & 1 & 0 & 1 \\
          3 & 2 & 5 & -1 & 9 & 2 \\
          1 & -1 & -5 & 2 & 0 & -1
        \end{bmatrix}
      \]
      which row-reduces to
      \[
        \begin{bmatrix}
          \leading{1} & 0 & -1 & 0 & 3 & 0 \\
          0 & \leading{1} & 4 & 0 & -1 & 0 \\
          0 & 0 & 0 & \leading{1} & -2 & 0 \\
          0 & 0 & 0 & 0 & 0 & \leading{1}
        \end{bmatrix}
      \]

      At this point, we see that the system is inconsistent by
      \ref{theorem:RCLS}, so we know there <em>is not</em> a solution
      for the five scalars
      $\alpha_1,\,\alpha_2,\,\alpha_3,\,\alpha_4,\,\alpha_5$.  This is
      enough evidence for us to say that $\vect{v}\not\in\spn{S}$.
      End of story.
    \end{feedback}
  \end{question}
\end{example}

\begin{example}[Span of columns]
  Begin with the finite set of three vectors of size $3$
  \[
    S=\{\vect{u}_1,\,\vect{u}_2,\,\vect{u}_3\}
    =\left\{
      \colvector{1\\2\\1},\,\colvector{-1\\1\\1},\,\colvector{2\\1\\0}
    \right\}
  \]
  and consider the infinite set $\spn{S}$.  The vectors of $S$ could
  have been chosen to be anything, but for reasons that will become
  clear later, we have chosen the three columns of the matrix
  \[
    \begin{bmatrix}
      1 & -1 & 2 \\
      2 & 1 & 1 \\
      1 & 1 & 0 
    \end{bmatrix}
  \]

  \begin{question}
    Is the vector
    \[
      \vect{v}=(5)\colvector{1\\2\\1}+(-3)\colvector{-1\\1\\1}+(7)\colvector{2\\1\\0}=
      \colvector{22\\14\\2}
    \]
    in $\spn{S}$?

    \begin{multipleChoice}
      \choice[correct]{Yes.}
      \choice{No.}
    \end{multipleChoice}

    \begin{feedback}[correct]
      Yes, $\vect{v} \in \spn{S}$ because $\vect{v}$ is a linear
      combination of $\vect{u}_1,\,\vect{u}_2,\,\vect{u}_3$.  There is
      nothing magical about the scalars
      $\alpha_1=5,\,\alpha_2=-3,\,\alpha_3=7$, they could have been
      chosen to be anything.  So repeat this part of the example
      yourself, using different values of
      $\alpha_1,\,\alpha_2,\,\alpha_3$.

      What happens if you choose all three scalars to be zero?  You
      may conclude that
      \begin{multipleChoice}
        \choice[correct]{$\vect{0} \in \spn{S}$.}
        \choice{$\vect{0} \not\in \spn{S}$.}
      \end{multipleChoice} 
    \end{feedback}
  \end{question}

  \begin{question}
    So we know how to quickly construct sample elements of the set
    $\spn{S}$.  A slightly different question arises when you are
    handed a vector of the correct size and asked if it is an element
    of $\spn{S}$.  For example, is $\vect{w}=\colvector{1\\8\\5}$ in
    $\spn{S}$?  More succinctly, $\vect{w}\in\spn{S}$?

    To answer this question, we will look for scalars
    $\alpha_1,\,\alpha_2,\,\alpha_3$ so that
    \begin{align*}
      \alpha_1\vect{u}_1+\alpha_2\vect{u}_2+\alpha_3\vect{u}_3&=\vect{w}
    \end{align*}
    By \ref{theorem:SLSLC}, solutions to this vector equation are
    solutions to the system of equations
    \begin{align*}
      \alpha_1-\alpha_2+2\alpha_3&=\answer{1}\\
      2\alpha_1+\alpha_2+\alpha_3&=answer{8}\\
      \alpha_1+\alpha_2&=\answer{5}
    \end{align*}
    Building the augmented matrix for this linear system, and row-reducing, gives
    \[
      \begin{bmatrix}
        \leading{1} & 0 & 1 & \answer{3}\\
        0 & \leading{1} & -1 & 2\\
        0 & 0 & 0 & 0
      \end{bmatrix}
    \]
    This system has \wordChoice{\choice[correct]{infinitely many
        solutions}\choice{finitely many solutions}} (there is a free
    variable in $x_3$), but all we need is one solution vector.  The
    solution
    \begin{align*}
      \alpha_1 &= 2
      &
        \alpha_2 &= 3
      &
        \alpha_3 &= 1
    \end{align*}
    tells us that
    \[
      (2)\vect{u}_1+(3)\vect{u}_2+(1)\vect{u}_3=\vect{w}
    \]
    so we may conclude
    \begin{multipleChoice}
      \choice[correct]{that $\vect{w} \in \spn{S}$.}
      \choice{that $\vect{w} \not\in \spn{S}$.}
    \end{multipleChoice} 
    
    Notice that there are an infinite number of ways to answer this
    question affirmatively.  We could choose a different solution,
    this time choosing the free variable to be zero,
    \begin{align*}
      \alpha_1 &= 3
      &
        \alpha_2 &= 2
      &
        \alpha_3 &= 0
    \end{align*}
    shows us that
    \[
      (3)\vect{u}_1+(2)\vect{u}_2+(0)\vect{u}_3=\vect{w}
    \]
    Verifying the arithmetic in this second solution will make it
    obvious that $\vect{w}$ is in this span.  And of course, we now
    realize that there are an infinite number of ways to realize
    $\vect{w}$ as element of $\spn{S}$.
  \end{question}

    
  \begin{question}
    Let us ask the same type of question again, but this time with
    $\vect{y}=\colvector{2\\4\\3}$, i.e., is $\vect{y}\in\spn{S}$?

    \begin{multipleChoice}
      \choice{Yes.}
      \choice[correct]{No.}
    \end{multipleChoice}

    \begin{feedback}[correct]
      So we will look for scalars $\alpha_1,\,\alpha_2,\,\alpha_3$ so that
      \begin{align*}
        \alpha_1\vect{u}_1+\alpha_2\vect{u}_2+\alpha_3\vect{u}_3&=\vect{y}\\
      \end{align*}
      By \ref{theorem:SLSLC} solutions to this vector equation are the solutions to the system of equations,
      \begin{align*}
        \alpha_1-\alpha_2+2\alpha_3&=2\\
        2\alpha_1+\alpha_2+\alpha_3&=4\\
        \alpha_1+\alpha_2&=3
      \end{align*}
      Building the augmented matrix for this linear system, and row-reducing, gives,
      \[
        \begin{bmatrix}
          \leading{1} & 0 & 1 & 0\\
          0 & \leading{1} & -1 & 0\\
          0 & 0 & 0 & \leading{1}
        \end{bmatrix}
      \]
      
      This system is inconsistent (there is a pivot column in the last
      column, \ref{theorem:RCLS}), so there are no scalars
      $\alpha_1,\,\alpha_2,\,\alpha_3$ that will create a linear
      combination of $\vect{u}_1,\,\vect{u}_2,\,\vect{u}_3$ that equals
      $\vect{y}$.  More precisely, $\vect{y}\not\in\spn{S}$.
    \end{feedback}
  \end{question}

  There are three things to observe in this example.  First, it is
  easy to construct vectors in $\spn{S}$.  Second, it is possible that
  some vectors are in $\spn{S}$ (e.g., $\vect{w}$), while others are
  not (e.g., $\vect{y}$).  Deciding if a given vector is in $\spn{S}$
  leads to solving a linear system of equations and asking if the
  system is consistent.

\end{example}

\begin{example}[Span of the columns, again]
  Begin with the finite set of three vectors of size $3$
  \[
    R=\{\vect{v}_1,\,\vect{v}_2,\,\vect{v}_3\}
    =\left\{
      \colvector{-7\\5\\1},\,\colvector{-6\\5\\0},\,\colvector{-12\\7\\4}
    \right\}
  \]
  that are the columns of the coefficient matrix
  \[
    \begin{bmatrix}
      -7&-6&- 12\\
      5&5&7\\
      1&0&4
    \end{bmatrix}.
  \]
  Let's consider the infinite set $\spn{R}$.

  \begin{question}
    Is the vector
    \[
      \vect{x}=(2)\colvector{-7\\5\\1}+(4)\colvector{-6\\5\\0}+(-3)\colvector{-12\\7\\4}=
      \colvector{-2\\9\\-10}
    \]
    in $\spn{R}$?

    \begin{multipleChoice}
      \choice[correct]{Yes, $\vect{x} \in \spn{R}$.}
      \choice{No, $\vect{x} \not\in \spn{R}$.}
    \end{multipleChoice}
    
    \begin{feedback}[correct]
      Note that $\vect{x}$ is a linear combination of
      $\vect{v}_1,\,\vect{v}_2,\,\vect{v}_3$ and therefore
      $\vect{x}\in\spn{R}$.  Try some different values of
      $\alpha_1,\,\alpha_2,\,\alpha_3$ yourself, and see what vectors
      you can create as elements of $\spn{R}$.

      \begin{question}
        Now ask if a given vector is an element of $\spn{R}$.  For
        example, is $\vect{z}=\colvector{-33\\24\\5}$ in $\spn{R}$?  Is
        $\vect{z}\in\spn{R}$?
        \begin{multipleChoice}
          \choice[correct]{Yes, $\vect{z} \in \spn{R}$.}
          \choice{No, $\vect{z} \not\in \spn{R}$.}
        \end{multipleChoice}

        \begin{feedback}[correct]
          We looked for scalars $\alpha_1,\,\alpha_2,\,\alpha_3$ so that
          \begin{align*}
            \alpha_1\vect{v}_1+\alpha_2\vect{v}_2+\alpha_3\vect{v}_3&=\vect{z}\\
          \end{align*}
          By \ref{theorem:SLSLC} solutions to this vector equation are the solutions to the system of equations,
          \begin{align*}
            -7\alpha_1-6\alpha_2-12\alpha_3&=-33\\
            5\alpha_1+5\alpha_2+7\alpha_3&=24\\
            \alpha_1+4\alpha_3&=5
          \end{align*}
          Building the augmented matrix for this linear system, and row-reducing, gives
          \[
            \begin{bmatrix}
              \leading{1}&0&0&-3\\
              0&\leading{1}&0&5\\
              0&0&\leading{1}&2
            \end{bmatrix}
          \]
          This system has a unique solution,
          \begin{align*}
            \alpha_1 = -3&&\alpha_2 = 5&&\alpha_3 = 2
          \end{align*}
          telling us that
          \[
            (-3)\vect{v}_1+(5)\vect{v}_2+(2)\vect{v}_3=\vect{z}
          \]
          so we are convinced that $\vect{z}$ really is in $\spn{R}$.
          Notice that in this case we have only one way to answer the
          question affirmatively since the solution is unique.
        \end{feedback}
      \end{question}
    \end{feedback}
  \end{question}

  \begin{question}
    Let us ask about another vector, say is
    $\vect{x}=\colvector{-7\\8\\-3}$ in $\spn{R}$?  Is
    $\vect{x}\in\spn{R}$?

    \begin{multipleChoice}
      \choice[correct]{Yes, $\vect{x} \in \spn{R}$.}
      \choice{No, $\vect{x} \not\in \spn{R}$.}
    \end{multipleChoice}

    \begin{feedback}[correct]
      We desire scalars $\alpha_1,\,\alpha_2,\,\alpha_3$ so that
      \begin{align*}
        \alpha_1\vect{v}_1+\alpha_2\vect{v}_2+\alpha_3\vect{v}_3&=\vect{x}\\
      \end{align*}
      By \ref{theorem:SLSLC} solutions to this vector equation are the solutions to the system of equations
      \begin{align*}
        -7\alpha_1-6\alpha_2-12\alpha_3&=-7\\
        5\alpha_1+5\alpha_2+7\alpha_3&=8\\
        \alpha_1+4\alpha_3&=-3
      \end{align*}
      Building the augmented matrix for this linear system, and row-reducing, gives
      \[
        \begin{bmatrix}
          \leading{1} & 0 & 0 & 1 \\
          0 & \leading{1} & 0 & 2 \\
          0 & 0 & \leading{1} & -1
        \end{bmatrix}
      \]
      This system has a unique solution,
      \begin{align*}
        \alpha_1 = 1&&\alpha_2 = 2&&\alpha_3 = -1
      \end{align*}
      telling us that
      \[
        (1)\vect{v}_1+(2)\vect{v}_2+(-1)\vect{v}_3=\vect{x}
      \]
      so we are convinced that $\vect{x}$ really is in $\spn{R}$.
      Notice that in this case we again have only one way to answer the
      question affirmatively since the solution is again unique.
    \end{feedback}
  \end{question}

  \begin{question}
    We could continue to test other vectors for membership in $\spn{R}$,
    but there is no point.

    A question about membership in $\spn{R}$ inevitably leads to a
    system of \wordChoice{\choice{one}\choice{two}\choice[correct]{three}} equations in \wordChoice{\choice{one}\choice{two}\choice[correct]{three}} variables
    $\alpha_1,\,\alpha_2,\,\alpha_3$ with a coefficient matrix whose
    columns are the vectors $\vect{v}_1,\,\vect{v}_2,\,\vect{v}_3$.

    This particular coefficient matrix is
    \wordChoice{\choice{singular}\choice[correct]{nonsingular}}, so by
    \ref{theorem:NMUS}, the system is guaranteed to have a solution.
    (This solution is unique, but that is not critical here.)  So
    \textit{no matter} which vector we might have chosen for
    $\vect{z}$, we would have been \textit{certain} to discover that
    it was an element of $\spn{R}$.  Stated differently, every vector
    of size 3 is in $\spn{R}$, or $\spn{R}=\complex{3}$.
  \end{question}
\end{example}

\end{document}
